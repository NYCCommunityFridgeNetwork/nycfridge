(this.webpackJsonpnycfridge=this.webpackJsonpnycfridge||[]).push([[0],{112:function(e,t,a){e.exports={Loader:"Spinner_Loader__b2Z2P",load1:"Spinner_load1__2Lq4d"}},122:function(e,t,a){e.exports=a(193)},127:function(e,t,a){},130:function(e,t,a){},187:function(e,t,a){},193:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),o=a(20),i=a(0),c=a.n(i),l=a(16),s=a.n(l),u=(a(127),a(22)),d=a(23),m=a(26),f=a(25),p=a(221),g=a(91),h=(a(130),a(61)),b=a.n(h);b.a.initializeApp({apiKey:"AIzaSyCOvDGXIuekFUUzSPh5l1940wCB657NudI",authDomain:"nycfridge-1595334632389.firebaseapp.com",databaseURL:"https://nycfridge-1595334632389.firebaseio.com",projectId:"nycfridge-1595334632389",storageBucket:"nycfridge-1595334632389.appspot.com",messagingSenderId:"1012323391989",appId:"1:1012323391989:web:0326829c1bd942705fe8bc",measurementId:"G-8G077TP9PC"});var E=b.a,v=a(39),C=a.n(v),O=a(24),k=a(51),j=a.n(k),y=a(58),F={google:{apiKey:"AIzaSyCOvDGXIuekFUUzSPh5l1940wCB657NudI"},defaultCenter:{address:"252 Broadway Brooklyn NY 11211",lat:40.7,lng:-73.9},defaultZoom:12},S=a(5),w=a(38),x=a.n(w),I=a(95),_=a.n(I).a.create({baseURL:"https://nycfridge-1595334632389.firebaseio.com/"}),D=E.database(),M=E.storage(),R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:e,data:t}},A=function(e,t){return{type:"ADD_FRIDGE",data:t,id:e}},N=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){var n,o,i,c,l,s,u,d,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return function(e){return e},n=function(e,t){return a(A(e.data.name,t)),e},a(R("ADD_FRIDGE_START")),x.a.setApiKey(F.google.apiKey),o={},i=e.streetAddress,c=i.concat(" ",e.borough," NY"),t.prev=7,t.next=10,x.a.fromAddress(c);case 10:return l=t.sent,s=l.results[0].geometry.location,u=s.lat,d=s.lng,o=Object(S.a)(Object(S.a)({},e),{},{lat:u,lng:d}),t.prev=13,t.next=16,_.post("/fridges.json",o);case 16:return m=t.sent,t.abrupt("return",n(m,o));case 20:t.prev=20,t.t0=t.catch(13),console.error("Could not submit to database");case 23:t.next=28;break;case 25:t.prev=25,t.t1=t.catch(7),console.error("Could not fetch coordinates");case 28:case"end":return t.stop()}}),t,null,[[7,25],[13,20]])})));return function(e){return t.apply(this,arguments)}}()},T=function(e,t,a){return function(){var n=Object(o.a)(r.a.mark((function n(o){var i,c,l,s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(e,t,a,n){return console.log("success",t),a&&(console.log("image",a),o(G(e,t.data.name,a))),o(L(t.data.name,n)),t},o(R("CHECK_START")),n.prev=2,c={name:e.name,notes:e.notes,date:JSON.stringify(new Date)},l="/fridges/".concat(t.id,"/checks.json"),n.next=7,_.post(l,c);case 7:return s=n.sent,n.abrupt("return",i(t.id,s,a,c));case 11:n.prev=11,n.t0=n.catch(2),console.error("Could not post check");case 14:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},B=function(e){return{type:"CONFIRM_FRIDGE",id:e}},L=function(e,t){return{type:"CHECK_FRIDGE",data:t,id:e}},G=function(e,t,a){return function(n){M.ref("images/".concat(e,"/").concat(t)).put(a).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){M.ref("images/".concat(e,"/")).child(t).getDownloadURL().then((function(a){console.log("postCheckImage url",a),D.ref("fridges/".concat(e,"/imageURL")).set(a),n(function(e,t){return{type:"POST_CHECK_IMAGE",url:e,id:t}}(a,t))}))}))}},H=function(e){return e.fridges.find((function(t){return t.id==e.currentFridge}))},z=a(109),U=a.n(z),K=(a(187),a(46)),P=a.n(K),Y=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:P.a.Info},c.a.createElement("div",{className:P.a.popupContainer},c.a.createElement("div",{className:P.a.popuBubbleAnchor},c.a.createElement(y.a,{border:"horizontal",pad:"xsmall",background:{color:"brand"},className:P.a.popupBubble},this.props.fridgeData.name,c.a.createElement("br",null),this.props.fridgeData.streetAddress," ",c.a.createElement("br",null)))))}}]),a}(i.Component),W=function(e){var t=e.showInfoBox,a=e.fridgeData,n=e.clickHandler;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"pin",onClick:function(e){n(a.id,e)}},c.a.createElement(U.a,{className:"pin-icon"}),t?c.a.createElement(Y,{className:"mobile",fridgeData:a}):null,t?c.a.createElement(Y,{className:"desktop",fridgeData:a}):null))},Z=a(36),J=a(229),X=a(224),q=a(230),V=a(231),Q=a(55),$=a.n(Q),ee=a(111),te=a.n(ee),ae=a(45),ne=a.n(ae),re=a(213),oe=a(219),ie=a(223),ce=a(228),le=function(e){var t=Object(i.useState)(null),a=Object(Z.a)(t,2),n=a[0],r=a[1],o=Object(O.c)();return c.a.createElement(y.a,null,c.a.createElement("input",{type:"file",name:"file",id:"file",class:"inputfile",onChange:function(e){if(e.target.files[0]){var t=e.target.files[0];r(t)}}}),c.a.createElement("label",{for:"file"},"Upload Fridge Picture"),c.a.createElement(re.a,{onSubmit:function(t){return a=t.value,r=e.f,o(T(a,r,n)),void e.cancelCheck(!1);var a,r}},c.a.createElement(y.a,{gap:"small"},c.a.createElement(oe.a,{htmlFor:"text"},c.a.createElement(ie.a,{size:"small",id:"textinput-id",name:"name",placeholder:"Your Name (optional)"})),c.a.createElement(oe.a,{name:"notes",label:"Notes",htmlFor:"text-area",component:ce.a,placeholder:"leave your notes about this check-in here!"}),c.a.createElement(y.a,{direction:"row",gap:"xsmall"},c.a.createElement(X.a,{size:"small",active:!0,label:"Cancel",onClick:function(){return e.cancelCheck(!1)}}),c.a.createElement(X.a,{size:"small",type:"submit",primary:!0,label:"Submit Check"})))))},se=function(e){var t=Object(i.useState)(!1),a=Object(Z.a)(t,2),n=a[0],r=a[1];Object(i.useEffect)((function(){}));var o=e.fridgeData,l=o.name,s=o.neighborhood,u=o.streetAddress,d=o.notes,m=o.link,f=o.instagram,p=o.lat,g=o.lng,h=o.checks,b=o.imageURL,E=m;f&&(E="http://www.instagram.com/"+f);var v=null;if(h){var C=function(){var e=[];for(var t in h)e.push(Object(S.a)(Object(S.a)({},h[t]),{},{id:t}));return e}(),O=C[C.length-1],k=JSON.parse(O.date),j=O.notes;k=new Date(k).toLocaleString();var F=b?c.a.createElement(J.a,{fit:"contain",height:"400",width:"250",src:b}):null;v=c.a.createElement(y.a,{margin:"small",gap:"xsmall",style:{alignItems:"center"}},c.a.createElement("h3",null,"Last checked: ",k),"Most recent note:  ",j,F)}var w=c.a.createElement(y.a,{pad:{bottom:"large"}},c.a.createElement(X.a,{primary:!0,active:!0,onClick:function(){return r(!0)},label:"Check Fridge"})),x=c.a.createElement(le,{f:e.fridgeData,confirmCheck:e.submitCheck,cancelCheck:r});return c.a.createElement(y.a,{overflow:"hidden"},c.a.createElement(y.a,{flex:!1,align:"center",direction:"row",tag:"header",style:{position:"relative"}},c.a.createElement(q.a,{level:4},c.a.createElement("strong",null,c.a.createElement(X.a,{plain:!0,size:"large",alignSelf:"start",onClick:e.onClose,label:"Back To Map",icon:c.a.createElement(ne.a,{fontSize:"large"})})))),c.a.createElement(y.a,{align:"center",margin:"medium",pad:"medium"},c.a.createElement("h2",null,l),c.a.createElement("h2",null,"Neighborhood: ",s),c.a.createElement("h3",null,"Location: ",c.a.createElement(V.a,{href:function(e,t){return"https://www.google.com/maps/dir/?api=1&destination=".concat(e,",",t)}(p,g)},u,c.a.createElement($.a,null))),c.a.createElement("h3",null,"Notes: ",d),f&&c.a.createElement(X.a,{href:E,icon:c.a.createElement(te.a,null),label:"@".concat(f)}),v,n?x:w))},ue=a(217),de=a(226),me=a(33),fe=a.n(me),pe=function(e){return c.a.createElement("div",null,c.a.createElement(ue.a,{background:"light-4",pad:"xsmall",justify:"center"},c.a.createElement(y.a,{gap:"small",alignSelf:"center"},c.a.createElement(q.a,{level:"4"},"NYC Community Fridges"),c.a.createElement(de.a,null,"Current Fridge Count : ",e.fridges.length))),c.a.createElement(y.a,{justify:"center",direction:"row",pad:"xsmall",gap:"small"},c.a.createElement(X.a,{primary:!0,label:"Add Fridge",active:!0,onClick:e.openSubmissionModal})))},ge=a(52),he=a(220),be=function(e){var t=Object(i.useState)(""),a=Object(Z.a)(t,2),n=a[0],r=a[1];return c.a.createElement(y.a,Object(ge.a)({overflow:"auto",pad:"medium",gap:"medium",margin:"medium"},"margin",{bottom:"100px"}),c.a.createElement(re.a,{onSubmit:function(t){return function(t){e.onSubmit(t),e.onClose()}(t.value)}},c.a.createElement(oe.a,{name:"name",htmlfor:"textinput-id",label:"Fridge Name"},c.a.createElement(ie.a,{id:"textinput-id",name:"name",placeholder:"Community Fridge"})),c.a.createElement(oe.a,{name:"streetAddress",htmlfor:"textinput-id",label:"Location"},c.a.createElement(ie.a,{id:"textinput-id",name:"streetAddress",placeholder:"Street Address"})),c.a.createElement(oe.a,{name:"borough",htmlfor:"textinput-id",label:"Borough"},c.a.createElement(he.a,{name:"borough",options:["Brooklyn","Manhattan","Queens","Bronx","Staten Island"],value:n,onChange:function(e){var t=e.option;return r(t)}})),c.a.createElement(oe.a,{name:"neighborhood",htmlfor:"textinput-id",label:"Neighborhood"},c.a.createElement(ie.a,{id:"textinput-id",name:"neighborhood",placeholder:"Bushwick"})),c.a.createElement(oe.a,{name:"instagram",htmlfor:"textinput-id",label:"Instagram handle"},c.a.createElement(ie.a,{id:"textinput-id",name:"instagram",placeholder:"@yourfridge"})),c.a.createElement(oe.a,{name:"link",htmlfor:"textinput-id",label:"Additional Link/Contact"},c.a.createElement(ie.a,{id:"textinput-id",name:"link",placeholder:"Email address / volunteer form"})),c.a.createElement(oe.a,{name:"notes",htmlfor:"textinput-id",label:"Notes"},c.a.createElement(ce.a,{id:"textinput-id",name:"notes",placeholder:"type anything else people should know about this fridge!"})),c.a.createElement(y.a,{direction:"row",gap:"medium",pad:{top:"large"}},c.a.createElement(X.a,{label:"close",onClick:e.onClose}),c.a.createElement(X.a,{type:"submit",primary:!0,label:"Submit"}),c.a.createElement(X.a,{type:"reset",label:"Reset"}))))};a(90);C.a.setAppElement("#root"),C.a.defaultStyles.content.maxWidth="700px",C.a.defaultStyles.content.margin="0 auto";var Ee=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).openSubmissionModal=function(){return n.setState({isSubmitModalOpen:!0})},n.openModal=function(e,t){n.props.setCurrentFridge(e),n.setState({isInfoModalOpen:!0})},n.closeModal=function(){n.setState({isInfoModalOpen:!1,isSubmitModalOpen:!1})},n.fridgeAdded=function(e){n.props.submitFridge(e)},n.checkFridge=function(){n.setState({isChecking:!0})},n.submitCheck=function(){},n.state={isInfoModalOpen:!1,isSubmitModalOpen:!1,isChecking:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchFridges()}},{key:"render",value:function(){var e=this,t=this.props.fridges.map((function(t){return c.a.createElement(W,{key:t.id,lat:t.lat,lng:t.lng,fridgeData:t,showInfoBox:!0,clickHandler:e.openModal})}));return this.state.isChecking?c.a.createElement(le,{fridgeData:this.props.currentFridge}):c.a.createElement(se,{fridgeData:this.props.currentFridge}),c.a.createElement("div",{className:fe.a.Container},c.a.createElement(pe,{fridges:this.props.fridges,showInfoBox:!0,openSubmissionModal:this.openSubmissionModal}),c.a.createElement(C.a,{isOpen:this.state.isSubmitModalOpen,onRequestClose:this.closeModal},c.a.createElement(be,{onClose:this.closeModal,onSubmit:this.fridgeAdded})),c.a.createElement(y.a,{className:"google-map"},c.a.createElement(j.a,{bootstrapURLKeys:{key:F.google.apiKey},defaultCenter:F.defaultCenter,defaultZoom:F.defaultZoom,yesIWantToUseGoogleMapApiInternals:!0},t),c.a.createElement(C.a,{isOpen:this.state.isInfoModalOpen,onRequestClose:this.closeModal},c.a.createElement(se,{fridgeData:this.props.currentFridge,onClose:this.closeModal,submitCheck:this.submitCheck}))))}}]),a}(i.Component),ve=Object(O.b)((function(e){return{fridges:e.fridges,currentFridge:H(e)}}),(function(e){return{submitFridge:function(t){return e(N(t))},fetchFridges:function(){return e(function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return t(R("LOAD_FRIDGES",e)),e},t(R("FETCH_FRIDGE_START")),n=[],e.prev=3,e.next=6,_.get("/fridges.json");case 6:for(i in(o=e.sent).data)n.push(Object(S.a)(Object(S.a)({},o.data[i]),{},{id:i}));return e.abrupt("return",a(n));case 11:e.prev=11,e.t0=e.catch(3),console.error("Data was not fetched.");case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}())},setCurrentFridge:function(t){return e(function(e){return function(t){t(R("SET_CURRENT",e))}}(t))}}}))(Ee),Ce=a(225),Oe=a(227),ke=a(218),je=a(113),ye=a.n(je),Fe=a(112),Se=a.n(Fe),we=function(){return c.a.createElement("div",{className:Se.a.Loader},"Loading...")},xe=a(50),Ie=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).bindResizeListener=function(e,t){t.event.addDomListenerOnce(e,"idle",(function(){e.gestureHandling="greedy"}))},n.handleApiLoaded=function(e,t){console.log("map",e,t),e.gestureHandling="greedy",n.bindResizeListener(e,t)},n.onModalOpen=function(e){n.props.getFridge(e),n.setState({modal:e})},n.modalClosedHandler=function(){n.setState({modal:null})},n.confirmCheck=function(e,t){n.props.onFridgeChecked(e,t,n.state.image),n.setState({checking:!1})},n.getMapLink=function(e){return"https://www.google.com/maps/dir/?api=1&destination=".concat(e.lat,",",e.lng)},n.getChecks=function(e){var t=[];for(var a in e.checks)t.push(Object(S.a)(Object(S.a)({},e.checks[a]),{},{id:a}));return t},n.handleChange=function(e){if(e.target.files[0]){var t=e.target.files[0];n.setState((function(){return{image:t}}))}},n.textInput=c.a.createRef(),n.focusTextInput=n.focusTextInput.bind(Object(xe.a)(n)),n.submitButton=c.a.createRef(),n.state={modal:null,checking:!1,url:"",image:null,progress:0,showInfoBox:!0},n}return Object(d.a)(a,[{key:"focusTextInput",value:function(){this.textInput.current.focus()}},{key:"render",value:function(){var e=this,t=this.props.currentFridge,a=null;if(t){var n,r,o;if(t.confirmed){if(n=c.a.createElement("h4",null,"Status: Confirmed"),r=c.a.createElement(y.a,{pad:{bottom:"large"}},c.a.createElement(X.a,{primary:!0,active:!0,onClick:function(){return e.setState({checking:!0})},label:"Check Fridge"})),t.checks){var i=this.getChecks(t),l=i[i.length-1],s=JSON.parse(l.date),u=l.notes,d=(s=new Date(s)).toLocaleString(),m=t.imageURL?c.a.createElement(J.a,{fit:"contain",height:"400",width:"250",src:t.imageURL}):null;o=c.a.createElement(y.a,{margin:"small",gap:"xsmall",style:{alignItems:"center"}},c.a.createElement("h3",null,"Last checked: ",d),"Most recent note:  ",u,m)}this.state.checking&&(r=c.a.createElement(y.a,null,c.a.createElement("input",{type:"file",name:"file",id:"file",class:"inputfile",onChange:this.handleChange}),c.a.createElement("label",{for:"file"},"Upload Fridge Picture"),c.a.createElement(re.a,{onSubmit:function(a){return e.confirmCheck(a.value,t)}},c.a.createElement(y.a,{gap:"small"},c.a.createElement(oe.a,{htmlFor:"text"},c.a.createElement(ie.a,{ref:this.textInput,onClick:this.focusTextInput,size:"small",id:"textinput-id",name:"name",placeholder:"Your Name (optional)"})),c.a.createElement(oe.a,{name:"notes",label:"Notes",htmlFor:"text-area",ref:this.textInput,component:ce.a,placeholder:"leave your notes about this check-in here!"}),c.a.createElement(y.a,{direction:"row",gap:"xsmall"},c.a.createElement(X.a,{size:"small",active:!0,label:"Cancel",onClick:function(){return e.setState({checking:!1})}}),c.a.createElement(X.a,{ref:this.submitButton,size:"small",type:"submit",primary:!0,label:"Submit Check"}))))))}else n=c.a.createElement(y.a,null,c.a.createElement("h4",null,"Status: Unconfirmed"),c.a.createElement(X.a,{primary:!0,active:!0,onClick:function(){return e.props.onFridgeConfirmed(t)},label:"Confirm Fridge"}));a=c.a.createElement(y.a,{align:"center",margin:"medium",pad:"medium",overflow:"hidden"},c.a.createElement("h2",null,t.name),c.a.createElement("h2",null,"Neighborhood: ",t.neighborhood),c.a.createElement("h3",null,"Location: ",c.a.createElement(V.a,{href:this.getMapLink(t)},t.streetAddress,c.a.createElement($.a,null))),c.a.createElement("h3",null,"Notes: ",t.notes),c.a.createElement(X.a,{href:t.link,label:"Social Media"}),n,o,r)}return c.a.createElement(y.a,{className:"google-map"},this.state.modal&&c.a.createElement(Ce.a,{full:"vertical",onClickOutside:this.modalClosedHandler},c.a.createElement(y.a,{overflow:"hidden",width:"large"},c.a.createElement(y.a,{flex:!1,pad:{horizontal:"medium"},align:"center",direction:"row",tag:"header",justify:"between",style:{position:"relative"}},c.a.createElement(q.a,{level:4},c.a.createElement("strong",null,c.a.createElement(X.a,{plain:!0,size:"large",alignSelf:"start",onClick:this.modalClosedHandler,label:"Back To Map",icon:c.a.createElement(ne.a,{fontSize:"large"})})))),c.a.createElement(y.a,{flex:!0,align:"center",background:"light-1",overflow:"auto"},c.a.createElement(y.a,{flex:!1,background:"white"},a,c.a.createElement(X.a,{alignSelf:"center",margin:"medium",onClick:this.modalClosedHandler,label:"Back To Map",icon:c.a.createElement(ne.a,null)}))))),c.a.createElement(j.a,{bootstrapURLKeys:{key:F.google.apiKey},defaultCenter:this.props.location,defaultZoom:this.props.zoomLevel,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.handleApiLoaded(a,n)}},this.props.fridges.map((function(t){return c.a.createElement(W,{lat:t.lat,lng:t.lng,fridgeData:t,showInfoBox:e.props.showInfoBox,toggleHover:e.props.toggleHover,hover:e.props.hover,onModalOpen:e.onModalOpen})}))))}}]),a}(i.Component),_e=Object(O.b)((function(e){return{currentFridge:e.currentFridge}}),(function(e){return{getFridge:function(t){return e(function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){var n,o,i,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(e){a(R("GET_FRIDGE",e))},o="/fridges/".concat(e,".json"),t.prev=2,t.next=5,_.get(o);case 5:return i=t.sent,c=Object(S.a)(Object(S.a)({},i.data),{},{id:e}),t.abrupt("return",n(c));case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},onFridgeConfirmed:function(t){return e(function(e){var t=Object(S.a)(Object(S.a)({},e),{},{confirmed:!0});return function(a){var n="/fridges/".concat(e.id,".json");_.put(n,t).then((function(t){console.log(t.data),a(B(e.id))}))}}(t))},onFridgeChecked:function(t,a,n){return e(T(t,a,n))},getFridgeChecks:function(t){return e(function(e){return function(t){var a="/fridges/".concat(e,"/checks.json");_.get(a).then((function(e){t(R("GET_FRIDGE_CHECKS",e.data))}))}}(t))}}}))(Ie),De=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onModalOpen=function(){n.setState({modal:!0})},n.modalClosedHandler=function(){n.setState({modal:!1})},n.toggleHover=function(e){var t=n.state.hover===e?null:e;n.setState({hover:t})},n.fridgeAdded=function(e){n.props.onFridgeAdded(e)},n.addFridge=function(){n.onModalOpen()},n.state={location:{address:"252 Broadway Brooklyn NY 11211",lat:40.7,lng:-73.9},hover:null,modal:!1,url:"",image:null,progress:0,showInfoBox:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.onFridgesLoad()}},{key:"render",value:function(){var e=this,t=c.a.createElement(we,null),a=c.a.createElement(we,null);return this.props.fridges&&(t=c.a.createElement(_e,{location:this.state.location,zoomLevel:12,toggleHover:this.toggleHover,hover:this.state.hover,showInfoBox:this.state.showInfoBox,fridges:this.props.fridges}),a=c.a.createElement(Ce.a,{modal:!0,animation:"fadeIn",onEsc:this.modalClosedHandler,onClickOutside:this.modalClosedHandler},c.a.createElement(be,{onClose:this.modalClosedHandler,onSubmit:this.fridgeAdded}))),c.a.createElement("div",{className:fe.a.Container},c.a.createElement("div",{className:fe.a.contentWrap},c.a.createElement(ue.a,{background:"light-4",pad:"xsmall",justify:"center"},c.a.createElement(y.a,{gap:"small",alignSelf:"center"},c.a.createElement(q.a,{level:"3"},"NYC Community Fridges"),c.a.createElement(de.a,null,"Current Fridge Count : ",this.props.fridges.length))),c.a.createElement(y.a,{justify:"center",direction:"row",pad:"xsmall",gap:"small"},c.a.createElement(X.a,{primary:!0,label:"Add Fridge",active:!0,onClick:this.addFridge}),c.a.createElement(Oe.a,{name:"toggle",toggle:!0,checked:this.state.showInfoBox,label:"Show Fridge Info Boxes",onChange:function(t){return e.setState({showInfoBox:t.target.checked})}})),this.state.modal&&a,t),c.a.createElement(ke.a,{className:fe.a.Footer,justify:"center",background:"dark-2",pad:{horizontal:"large",vertical:"small"}},c.a.createElement(y.a,{height:"xxsmall"},c.a.createElement(de.a,{size:"xsmall",textAlign:"center"},"Fridges are set up and maintained by mutual aid organizations and volunteers, aided by ",c.a.createElement(V.a,{href:"https://www.instagram.com/iohnyc/"},"IOHNYC.")," Feed people not landfills, food sovereignty for all. "),c.a.createElement(de.a,{size:"xsmall",textAlign:"center"},"Site built using ",c.a.createElement(V.a,{href:"https://reactjs.org/"},"React, ")," UI components from ",c.a.createElement(V.a,{href:"https://v2.grommet.io/"},"Grommet.io. ")," Source code: ",c.a.createElement(V.a,{icon:c.a.createElement(ye.a,{fontSize:"small"}),href:"https://github.com/marsbtyne/nycfridge"})))))}}]),a}(i.Component),Me=(Object(O.b)((function(e){return{fridges:e.fridges,loading:e.loading}}),(function(e){return{onFridgeAdded:function(t){return e(N(t))}}}))(De),function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(e){return c.a.createElement("div",{className:"App"},c.a.createElement(g.a,null,c.a.createElement("title",null,"Map of NYC Community Fridges"),c.a.createElement("meta",{name:"description",content:"Map of free community fridges and food shares across New York City"})),c.a.createElement(p.a,null,c.a.createElement(ve,null)))}}]),a}(i.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Re=a(37),Ae=a(114),Ne=function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,_.get("/fridges.json");case 4:for(n in(a=e.sent).data)t.push(Object(S.a)(Object(S.a)({},a.data[n]),{},{id:n}));return e.abrupt("return",t);case 9:e.prev=9,e.t0=e.catch(1),console.error("Data was not fetched.");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Te={fridges:[],loading:!1,submitted:!1,currentFridge:null},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FRIDGE_START":return Object(S.a)(Object(S.a)({},e),{},{loading:!0});case"LOAD_FRIDGES":return Object(S.a)(Object(S.a)({},e),{},{fridges:t.data,loading:!1});case"GET_FRIDGE":return Object(S.a)(Object(S.a)({},e),{},{currentFridge:t.data,loading:!1});case"ADD_FRIDGE_START":return Object(S.a)(Object(S.a)({},e),{},{loading:!0,submitted:!1});case"SET_CURRENT":return Object(S.a)(Object(S.a)({},e),{},{currentFridge:t.data});case"CHECK_START":return Object(S.a)(Object(S.a)({},e),{},{loading:!0});case"ADD_FRIDGE":var a=Object(S.a)(Object(S.a)({},t.data),{},{id:t.id,confirmed:!1});return Object(S.a)(Object(S.a)({},e),{},{fridges:e.fridges.concat(a),loading:!1,submitted:!0});case"POST_CHECK_IMAGE":return Object(S.a)(Object(S.a)({},e),{},{currentFridge:Object(S.a)(Object(S.a)({},e.currentFridge),{},{imageURL:t.url}),loading:!1});case"CHECK_FRIDGE":var n=e.fridges.map((function(a){return a.id===e.currentFridge&&(a.checks||(a.checks={}),a.checks[t.id]=t.data),Object(S.a)(Object(S.a)({},a),{},{lastCheck:t.id})}));return Object(S.a)(Object(S.a)({},e),{},{fridges:n});case"GET_FRIDGE_CHECKS":return Object(S.a)(Object(S.a)({},e),{},{currentFridge:Object(S.a)(Object(S.a)({},e.currentFridge),{},{checks:t.data})});case"CONFIRM_FRIDGE":var r=e.fridges,o=r.map((function(e){return e.id===t.id&&(e.confirmed=!0),e}));return Object(S.a)(Object(S.a)({},e),{},{fridges:o,currentFridge:Object(S.a)(Object(S.a)({},e.currentFridge),{},{confirmed:!0})});default:return e}},Le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Re.c,Ge=Object(Re.d)(Be,Le(Object(Re.a)(Ae.a)));window.init=Object(o.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:t=e.sent,a=c.a.createElement(O.a,{store:Ge},c.a.createElement(Me,{fridges:t})),s.a.render(a,document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})));var He=document.createElement("script");He.src="https://maps.googleapis.com/maps/api/js?key=".concat(F.google.apiKey,"&callback=init"),He.defer=!0,document.head.appendChild(He),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,t,a){e.exports={Container:"container_Container__X1m1k",contentWrap:"container_contentWrap__1E3eC",Footer:"container_Footer__3RF1D"}},46:function(e,t,a){e.exports={Modal:"Modal_Modal__2pVUm",Info:"Modal_Info__1E4_K",popupBubble:"Modal_popupBubble__1Z61H",popupBubbleAnchor:"Modal_popupBubbleAnchor__3g4TB",popupContainer:"Modal_popupContainer__3hmTP"}},90:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.38f625ea.chunk.js.map